/* =========================
   Theme tokens
   ========================= */
html { color-scheme: light dark; }
html[data-theme="light"]{
  --bg:#ffffff; --fg:#151515; --muted:#7a7a7a; --line:#e7e7e7;
  --panel:#f7f7f7; --panelDeep:#efefef; --card:#ffffff; --ink:#ffffff;
  --shadow:0 10px 30px rgba(0,0,0,.08);
}
html[data-theme="dark"]{
  --bg:#0b0b0b; --fg:#ececec; --muted:#a2a2a2; --line:#1b1b1b;
  --panel:#111111; --panelDeep:#0e0e0e; --card:#121212; --ink:#ffffff;
  --shadow:0 10px 30px rgba(0,0,0,.35);
}

/* =========================
   Base
   ========================= */
*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0; background:var(--bg); color:var(--fg);
  font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}
[hidden]{ display:none !important }
a{ color:var(--ink); text-decoration:none }
:focus-visible{ outline:2px solid var(--ink); outline-offset:2px }

/* A11y helpers */
.sr-only{ position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0 }
.skip-link{ position:absolute; left:-9999px; top:auto }
.skip-link:focus{
  left:16px; top:16px; background:var(--panel); color:var(--fg);
  padding:8px 12px; border:1px solid var(--line); border-radius:8px; z-index:100
}

/* =========================
   Page frame: top / middle / bottom
   ========================= */
.grid-container-full{
  /* was: position:fixed; inset:0;  → blocked scrolling */
  min-height:100vh;
  display:grid;
  grid-template-rows: auto 1fr auto; /* top / middle / bottom */
}

/* =========================
   Top (header)
   ========================= */
.topbar{
  position:fixed; left:24px; right:24px; top:24px; height:60px; z-index:20;
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  background:var(--panel); border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow);
  padding:0 12px;
}
.tabs{ display:flex; gap:8px }
.tab{ padding:8px 10px; border-radius:10px; color:var(--fg) }
.tab.is-active{ background:rgba(255,255,255,.06) }

.top-actions{ display:flex; align-items:center; gap:10px }
.search input{
  width:240px; padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:transparent; color:var(--fg);
}
.btn, .btn-ghost, .icon-btn{
  border:1px solid var(--line); background:transparent; color:var(--fg);
  padding:9px 12px; border-radius:10px; cursor:pointer;
}
.btn{ border-color:var(--ink) }

.user{ position:relative }
.avatar-btn{
  width:34px; height:34px; border-radius:50%; border:1px solid var(--line);
  background:var(--panelDeep); color:var(--fg); cursor:pointer;
}
.user .menu{
  position:absolute; right:0; top:calc(100% + 8px);
  background:var(--panel); border:1px solid var(--line); border-radius:12px; box-shadow:var(--shadow);
  padding:6px; min-width:160px; z-index:30;
}
.user .menu a{ display:block; padding:8px 10px; color:var(--fg) }
.user .menu a:hover{ background:rgba(255,255,255,.06) }

/* =========================
   Middle (three columns): menu / information / guide
   ========================= */
.doc-grid{
  /* Centered "box" that adapts by device width */
  width:min(1980px, 100% - 48px);
  margin:96px auto 18px; /* 96px clears fixed header */
  display:grid;
  grid-template-columns: 200px 1fr 320px; /* menu / info / guide */
  gap:20px;
  align-items:start;
}

/* Left: menu */
.menu-card{
  position:sticky; top:96px; /* stays visible while scrolling */
  background:var(--panel); border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow);
  padding:12px; height:max-content;
}
.menu-card .menu{ display:flex; flex-direction:column; gap:6px }
.menu-item{
  display:flex; align-items:center; gap:10px;
  padding:10px 12px; border:1px solid transparent; border-radius:10px;
  color:var(--fg); background:transparent; cursor:pointer;
  transition:background .15s, border-color .15s, transform .15s;
}
.menu-item:hover{ background:rgba(255,255,255,.04); transform:translateY(-1px) }
.menu-item.danger{ color:#e66 }

/* Center: information */
.doc{
  background:var(--panel); border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow);
  padding:16px; position:relative; overflow:hidden;
}
.watermark{
  position:absolute; right:-30px; bottom:8px; pointer-events:none;
  color:var(--muted); opacity:.05; font-weight:900; font-size:3rem; letter-spacing:.06em; transform:rotate(-6deg);
}

/* Hero */
.hero{
  border:1px solid var(--line); border-radius:14px; overflow:hidden; background:var(--panelDeep);
  display:grid; grid-template-columns:1fr;
}
.hero-img{
  height:180px; background-image:url('hero.png');
  background-size:cover; background-position:center; filter:saturate(0%) contrast(110%);
}
.hero-text{ padding:14px 16px 16px }
.title{ font-size:clamp(2.2rem,2.8vw,3.2rem); letter-spacing:.1em; margin:0 0 6px }

/* Content blocks */
.block{
  border:1px solid var(--line); border-radius:14px; background:var(--card);
  padding:16px; margin:14px 0;
}
.block h2{ margin:0 0 8px }
.readable{ font-size:1.02rem; line-height:1.75 }
.two-col{ columns:2; column-gap:18px; padding-left:18px }
.cards{ display:grid; grid-template-columns:repeat(3,1fr); gap:12px }
.card{ border:1px solid var(--line); border-radius:12px; background:var(--panelDeep); padding:12px }

/* Right: guide (ToC) */
.toc-box{
  position:sticky; top:96px;
  background:var(--panel); border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow);
  padding:12px; margin-right:8px;
}
.toc-box h4{ margin:2px 0 8px }
.toc a{ display:block; padding:6px; border-radius:8px; color:var(--fg) }
.toc a:hover{ background:rgba(255,255,255,.05) }
.toc a.active{ background:rgba(255,255,255,.1) }
.help-box{ margin-top:12px }
.w100{ width:100% }

/* =========================
   Bottom (footer)
   ========================= */
.bottombar{
  background:var(--panel); border-top:1px solid var(--line);
  margin:18px 0 0; padding:10px 0;
}
.bottombar .foot-inner{
  width:min(1400px, 100% - 48px);
  margin:0 auto;
  display:flex; justify-content:space-between; align-items:center; gap:12px;
}
.bottombar nav a{ margin-left:12px }

/* =========================
   Modal
   ========================= */
.modal{ position:fixed; inset:0; display:none; z-index:60 }
.modal.show{ display:block }
.overlay{ position:absolute; inset:0; background:rgba(0,0,0,.5) }
.modal-card{
  position:absolute; right:40vw; top:96px; width:min(540px, calc(100% - 64px));
  background:var(--panel); border:1px solid var(--line); border-radius:14px; box-shadow:var(--shadow);
}
.modal-head{ display:flex; justify-content:space-between; align-items:center; padding:12px 14px; border-bottom:1px solid var(--line) }
.modal-body{ padding:14px }
.modal-foot{ padding:12px 14px; border-top:1px solid var(--line); display:flex; justify-content:flex-end; gap:8px }

/* =========================
   Back button
   ========================= */
.back-fab{
  position:fixed; left:18px; bottom:18px; z-index:50;
  border:1px solid var(--line); background:var(--panelDeep); color:var(--fg);
  padding:10px 14px; border-radius:999px; cursor:pointer; box-shadow:var(--shadow);
}
html[data-theme="light"] .back-fab{ background:#efefef; color:#111; border-color:#e6e6e6 }

/* =========================
   Anchors and scrolling
   ========================= */
:target{ scroll-margin-top:110px }

/* =========================
   Responsive
   ========================= */
@media (max-width:1200px){
  .doc-grid{ grid-template-columns: 220px 1fr 280px }
}
@media (max-width:1100px){
  .doc-grid{ grid-template-columns: 220px 1fr }
  .toc{ display:none }            /* hide guide column */
}
@media (max-width:860px){
  .topbar{ left:16px; right:16px }
  .doc-grid{
    width:min(100%, 100% - 32px);
    grid-template-columns: 1fr;   /* stack menu / info */
    gap:14px;
  }
  .menu-card{ position:relative; top:auto }
  .cards{ grid-template-columns:1fr 1fr }
}
@media (max-width:560px){
  .search input{ width:160px }
  .cards{ grid-template-columns:1fr }
  .two-col{ columns:1 }
}

/* =========================
   Meta.css specific styles
   ========================= */   
   

:root{
  --bg: transparent;              /* page background removed */
  --box-alpha: .82;               /* opacity for box colors */

  /* layout */
  --gap: 5%;                      /* horizontal gap between columns */

  /* muted dark palette (RGB, no alpha) */
  --c-metaphysics: 122 30 30;
  --c-ethics:      138 74 17;
  --c-politics:     92 58 115;
  --c-economics:    42 74 91;
  --c-science:      31 58 91;
  --c-technology:   52 78 65;
  --c-health:       91 58 58;
  --c-education:    63 81 102;
  --c-art:          74 59 78;
  --c-culture:      61 75 79;
  --c-ecology:      46 77 58;
  --c-psychology:   77 58 46;
  --c-law:          30 58 58;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background:var(--bg);
  color:#fff;
  font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

/* ===== Layout: ONLY center + right (two columns) ===== */
.layout{
  display:grid;
  grid-template-columns: 48% 48%; /* 2× ~50% */
  column-gap: var(--gap);
  row-gap:24px;
  padding:1.5% 2%;
  align-items:start;
  min-height:100vh;
}
.col{ min-height:0; }

/* hide the left column entirely */
.col-left{ display:none !important; }

/* Center column (grid of boxes) */
.col-center{
  border:1px solid rgba(255,255,255,.10);
  border-radius:14px;
  background:transparent;        /* no panel background */
  padding:14px;
  max-height:calc(100vh - 3%);
  overflow:auto;
}

/* Right column (topics reference) */
.col-right{
  border:1px solid rgba(255,255,255,.10);
  border-radius:14px;
  background:transparent;        /* no panel background */
  padding:12px;
  position:sticky; top:1.5%;
  max-height:calc(100vh - 3%);
  overflow:auto;
}

/* ===== Boxes ===== */
.card-grid{
  display:grid; gap:10px;
  grid-template-columns: repeat(auto-fill, minmax(72px, 1fr));
}

/* link boxes */
.card{
  aspect-ratio:1/1;
  border:1px solid rgba(255,255,255,.14);
  border-radius:10px;
  display:flex; align-items:center; justify-content:center;
  text-decoration:none; color:#fff; font-weight:700;
  transition:transform .12s ease, box-shadow .12s ease, opacity .12s;
}
.card:hover{ transform:translateY(-2px); box-shadow:0 10px 22px rgba(0,0,0,.35); }
.card:focus-visible{ outline:2px solid rgba(255,255,255,.7); outline-offset:2px; }

/* color by topic */
.t-metaphysics { background: rgba(var(--c-metaphysics), var(--box-alpha)); }
.t-ethics      { background: rgba(var(--c-ethics), var(--box-alpha)); }
.t-politics    { background: rgba(var(--c-politics), var(--box-alpha)); }
.t-economics   { background: rgba(var(--c-economics), var(--box-alpha)); }
.t-science     { background: rgba(var(--c-science), var(--box-alpha)); }
.t-technology  { background: rgba(var(--c-technology), var(--box-alpha)); }
.t-health      { background: rgba(var(--c-health), var(--box-alpha)); }
.t-education   { background: rgba(var(--c-education), var(--box-alpha)); }
.t-art         { background: rgba(var(--c-art), var(--box-alpha)); }
.t-culture     { background: rgba(var(--c-culture), var(--box-alpha)); }
.t-ecology     { background: rgba(var(--c-ecology), var(--box-alpha)); }
.t-psychology  { background: rgba(var(--c-psychology), var(--box-alpha)); }
.t-law         { background: rgba(var(--c-law), var(--box-alpha)); }

/* pinned highlight */
.card-grid[data-filter] .card{ opacity:.22; }
.card-grid[data-filter] .card.is-match{ opacity:1; }

/* ===== Right panel ===== */
.panel-title{ margin:0 0 10px; font-size:16px; font-weight:800; }
.topics{ list-style:none; margin:0; padding:0; display:grid; gap:8px; }
.topic{
  display:grid; grid-template-columns:18px 1fr auto; gap:8px; align-items:center;
  padding:8px 10px; border:1px solid rgba(255,255,255,.14);
  border-radius:10px; background:rgba(255,255,255,.04);
  cursor:pointer; user-select:none;
}
.topic .sw{ width:18px; height:18px; border-radius:4px; border:1px solid rgba(255,255,255,.25); }
.topic .nm{ font-weight:700; }
.topic .ct{ opacity:.85; font-variant-numeric: tabular-nums; }

/* active topic state */
.topic.is-active{ outline:2px solid rgba(255,255,255,.55); outline-offset:2px; background:rgba(255,255,255,.07); }

/* swatch colors */
.topic[data-key="metaphysics"] .sw{ background: rgb(var(--c-metaphysics)); }
.topic[data-key="ethics"]      .sw{ background: rgb(var(--c-ethics)); }
.topic[data-key="politics"]    .sw{ background: rgb(var(--c-politics)); }
.topic[data-key="economics"]   .sw{ background: rgb(var(--c-economics)); }
.topic[data-key="science"]     .sw{ background: rgb(var(--c-science)); }
.topic[data-key="technology"]  .sw{ background: rgb(var(--c-technology)); }
.topic[data-key="health"]      .sw{ background: rgb(var(--c-health)); }
.topic[data-key="education"]   .sw{ background: rgb(var(--c-education)); }
.topic[data-key="art"]         .sw{ background: rgb(var(--c-art)); }
.topic[data-key="culture"]     .sw{ background: rgb(var(--c-culture)); }
.topic[data-key="ecology"]     .sw{ background: rgb(var(--c-ecology)); }
.topic[data-key="psychology"]  .sw{ background: rgb(var(--c-psychology)); }
.topic[data-key="law"]         .sw{ background: rgb(var(--c-law)); }

/* Responsive: stack on narrow screens */
@media (max-width:1100px){
  .layout{ grid-template-columns:1fr; column-gap:0; row-gap:16px; }
  .col-right{ position:static; max-height:none; }
}
