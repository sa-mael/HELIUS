/* Theme tokens (grayscale UI, bright accent only for selection) */
html { color-scheme: light dark; }
html[data-theme="light"]{
  --bg:#ffffff; --fg:#111; --muted:#6f6f6f; --line:#e7e7e7; --surface:#fff; --ink:#000;
  --accent:#00d2ff;              /* bright highlight when a topic is selected */
}
html[data-theme="dark"]{
  --bg:#000; --fg:#e9e9e9; --muted:#a0a0a0; --line:#1e1e1e; --surface:#0a0a0a; --ink:#fff;
  --accent:#00d2ff;
}

/* Base */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0; background:var(--bg); color:var(--fg);
  font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}
.muted{ color:var(--muted); }
.small{ font-size:.9rem; }
a{ color:var(--fg); text-decoration:none; }

/* Header */
:root{ --header-h:64px; --sidebar-w:300px; --detail-w:420px; --wheel-size:clamp(260px, 40vw, 520px); }
.site-header{
  position:sticky; top:0; z-index:10; height:var(--header-h);
  display:flex; align-items:center; justify-content:space-between; gap:16px;
  padding:0 16px; background:rgba(0,0,0,.9); border-bottom:1px solid var(--line);
  backdrop-filter:saturate(0%) blur(6px);
}
html[data-theme="light"] .site-header{ background:rgba(255,255,255,.92); }
.brand{ font-weight:800; font-size:1.8rem; letter-spacing:.18em; }
.site-nav{ display:flex; gap:16px; }

/* Layout */
.layout{
  height:calc(100vh - var(--header-h));
  display:grid;
  grid-template-columns: var(--sidebar-w) 1fr var(--detail-w);
}

/* Sidebar */
.sidebar{
  border-right:1px solid var(--line); padding:16px; overflow:auto;
}
.user-card{
  display:flex; gap:12px; align-items:center; margin-bottom:16px;
}
.avatar{
  width:48px; height:48px; border-radius:50%; display:grid; place-items:center;
  background:#111; color:#fff;
}
.progress h3, .notes h3, .settings h3{ margin:16px 0 8px; }
.bar{ height:10px; border:1px solid var(--line); border-radius:999px; overflow:hidden; background:var(--surface); }
.fill{ height:100%; background:var(--fg); }
.note-form{ display:flex; gap:8px; }
.note-form input{ flex:1; padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:transparent; color:var(--fg); }
.btn{ border:1px solid var(--ink); background:transparent; color:var(--fg); padding:10px 12px; border-radius:10px; cursor:pointer; }
.note-list{ list-style:none; padding:0; margin:12px 0 0; display:grid; gap:8px; }
.note-list li{ border:1px solid var(--line); border-radius:10px; padding:10px 12px; background:var(--surface); display:flex; justify-content:space-between; gap:8px; }
.note-list button{ border:1px solid var(--line); background:transparent; color:var(--fg); border-radius:8px; padding:6px 8px; cursor:pointer; }
.switch{ display:flex; align-items:center; gap:8px; }

/* Center: wheel */
.center{
  position:relative; display:grid; place-items:center; overflow:hidden;
  border-right:1px solid var(--line);
}
.wheel{
  position:relative; width:var(--wheel-size); height:var(--wheel-size);
  border-radius:50%; border:1px dashed var(--line);
}
.topic{
  position:absolute; top:50%; left:50%;
  transform:translate(-50%,-50%);
  padding:10px 14px; border-radius:999px; border:1px solid var(--line);
  background:var(--surface); color:var(--fg);
  white-space:nowrap; font-weight:600; font-size:.95rem;
  cursor:pointer; transition:transform .18s ease, filter .18s ease, border-color .18s ease, background .18s ease;
}
.topic:hover{ transform:translate(-50%,-50%) scale(1.06); }
.topic.selected{
  border-color:var(--accent);
  background:var(--accent); color:#000;
  transform:translate(-50%,-50%) scale(1.16);
  z-index:2;
}
.center.dim .topic:not(.selected){ filter:brightness(.55); }

/* Right-pointing arrow that appears on selection */
.arrow{
  position:absolute; right:8px; top:50%; width:120px; height:0; opacity:0; pointer-events:none;
  transform:translateY(-50%);
  border-top:2px solid var(--accent);
}
.arrow::after{
  content:""; position:absolute; right:-6px; top:-5px;
  border-left:8px solid var(--accent); border-top:6px solid transparent; border-bottom:6px solid transparent;
}
.center.show-arrow .arrow{ opacity:1; }

/* Detail panel */
.detail-panel{
  padding:16px; overflow:auto; background:var(--bg);
}
.detail-head{ position:sticky; top:0; background:var(--bg); padding-bottom:8px; border-bottom:1px solid var(--line); margin-bottom:12px; }
.detail-body .card{ border:1px solid var(--line); border-radius:12px; padding:12px; background:var(--surface); margin:12px 0; }

/* Focus mode: dim left+center to highlight detail */
body.focus-detail .sidebar,
body.focus-detail .center{ filter:brightness(.6); }
body.focus-detail .detail-panel{ filter:none; }

/* Responsive */
@media (max-width: 1100px){
  :root{ --detail-w:360px; --sidebar-w:260px; }
}
@media (max-width: 880px){
  .layout{ grid-template-columns: 1fr; }
  .center{ border-right:none; border-bottom:1px solid var(--line); }
  body.focus-detail .sidebar, body.focus-detail .center{ filter:none; }
}
